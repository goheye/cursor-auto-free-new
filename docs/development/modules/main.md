# Main 模块开发文档

## 1. 模块概述

`main.py` 是 Cursor Auto Free 项目的核心入口模块，负责初始化应用程序并协调各个功能模块的工作。

## 2. 功能说明

### 2.1 主要功能
- 应用程序初始化
- 进程管理
- 机器码管理
- 账号注册自动化

### 2.2 核心类
- `CursorAutoFree`: 主应用程序类

## 3. 类设计

### 3.1 CursorAutoFree 类
```python
class CursorAutoFree:
    def __init__(self):
        """初始化应用程序"""
        
    def close_cursor_processes(self):
        """关闭所有Cursor进程"""
        
    def reset_machine_id(self) -> bool:
        """重置机器码"""
        
    def register_cursor_account(self) -> bool:
        """注册Cursor账号"""
```

## 4. 依赖关系

### 4.1 内部依赖
- `config.py`: 配置管理
- `logger.py`: 日志管理
- `machine_manager.py`: 机器码管理
- `email_manager.py`: 邮箱管理
- `browser_manager.py`: 浏览器自动化

### 4.2 外部依赖
- `psutil`: 进程管理
- `os`: 系统操作

## 5. 开发注意事项

### 5.1 初始化顺序
1. 配置加载
2. 日志初始化
3. 管理器初始化
   - 机器码管理器
   - 邮箱管理器
   - 浏览器管理器

### 5.2 错误处理
- 所有关键操作都需要异常处理
- 使用日志记录错误信息
- 确保资源正确释放

### 5.3 资源管理
- 确保浏览器进程正确关闭
- 处理进程清理
- 管理临时文件

## 6. 测试要点

### 6.1 单元测试
- 初始化测试
- 进程管理测试
- 机器码重置测试
- 账号注册测试

### 6.2 集成测试
- 完整流程测试
- 错误恢复测试
- 资源清理测试

## 7. 已知问题

### 7.1 当前问题
- 暂无

### 7.2 待优化项
- 异步处理优化
- 错误恢复机制增强
- 资源使用优化

## 8. 更新日志

### v1.0.0
- 初始版本
- 实现基本功能
- 添加完整文档 